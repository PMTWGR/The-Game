<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Industry Chess</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #000;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.4;
        }

        .container {
            display: grid;
            grid-template-columns: 280px 1fr 280px;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
            min-height: 95vh;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid #333;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 5px;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1em;
            opacity: 0.7;
            font-style: italic;
        }

        .panel {
            background: #111;
            border: 1px solid #333;
            padding: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .panel h2 {
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 400;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .board-container {
            position: relative;
            margin-bottom: 20px;
        }

        #chessboard {
            width: 560px;
            height: 560px;
            border: 2px solid #fff;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        button, select {
            background: #000;
            border: 1px solid #fff;
            padding: 8px 16px;
            color: white;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover, select:hover {
            background: #222;
        }

        .move-list {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .move-item {
            padding: 6px;
            margin: 3px 0;
            border-left: 2px solid #fff;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 6px;
            font-size: 0.9em;
        }

        .legend-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 1px solid #fff;
        }

        .educational-content {
            flex: 1;
            overflow-y: auto;
            font-size: 0.9em;
        }

        .insight {
            padding: 12px;
            margin: 8px 0;
            border-left: 2px solid #fff;
            background: #0a0a0a;
        }

        .ai-thinking {
            padding: 12px;
            margin: 8px 0;
            border-left: 2px solid #666;
            background: #0a0a0a;
            font-style: italic;
        }

        .square {
            transition: all 0.3s ease;
        }

        .square:hover {
            fill: #222;
        }

        .selected {
            fill: #333 !important;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }
            #chessboard {
                width: 400px;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Music Industry Chess</h1>
            <p>Speaks less but says more</p>
        </div>

        <div class="panel">
            <h2>MOVES</h2>
            <div class="move-list" id="moveList"></div>
            <div class="controls">
                <button onclick="resetGame()">New Game</button>
                <button onclick="undoMove()">Undo</button>
            </div>
        </div>

        <div class="game-container">
            <div class="board-container">
                <svg id="chessboard" width="560" height="560" viewBox="0 0 560 560">
                    <!-- Chess board -->
                    <rect width="560" height="560" fill="#000"/>
                    
                    <!-- Board squares -->
                    <g id="boardSquares"></g>
                    
                    <!-- Pieces -->
                    <g id="pieces"></g>
                    
                    <!-- Valid moves -->
                    <g id="validMoves"></g>
                </svg>
            </div>
            
            <div class="controls">
                <button onclick="makeAIMove()">AI Move</button>
                <select id="aiPersonality">
                    <option value="orca">ORCA</option>
                    <option value="major">Major Label</option>
                    <option value="tech">Tech Platform</option>
                </select>
            </div>
        </div>

        <div class="panel">
            <h2>INDUSTRY</h2>
            <div class="educational-content" id="educationalContent">
                <div class="insight">
                    <p>Board = Consumers. Pieces = Industry roles.</p>
                </div>
                <div class="ai-thinking" id="aiThinking">
                    <p>AI ready.</p>
                </div>
            </div>
            
            <h2>PIECES</h2>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>King = Government</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>Queen = Media</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>Rook = Gatekeepers</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>Bishop = Awards</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>Knight = Lawyers</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon" style="background: #000;"></div>
                    <span>Pawn = Artists</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            board: [],
            currentPlayer: 'white',
            selectedPiece: null,
            validMoves: [],
            moveHistory: [],
            aiThinking: false
        };

        // AI Personalities
        const aiPersonalities = {
            orca: {
                name: "ORCA",
                style: "Artist development focus",
                risk: 0.3
            },
            major: {
                name: "Major Label", 
                style: "Market control focus",
                risk: 0.6
            },
            tech: {
                name: "Tech Platform",
                style: "Disruption focus", 
                risk: 0.7
            }
        };

        // Initialize game
        function initGame() {
            createBoard();
            setupPieces();
            drawBoard();
            updateEducationalContent("Game started. White moves first.");
        }

        // Create board squares
        function createBoard() {
            const boardSquares = document.getElementById('boardSquares');
            boardSquares.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                gameState.board[row] = [];
                for (let col = 0; col < 8; col++) {
                    const isLight = (row + col) % 2 === 0;
                    const square = document.createElement('rect');
                    square.setAttribute('x', col * 70);
                    square.setAttribute('y', row * 70);
                    square.setAttribute('width', 70);
                    square.setAttribute('height', 70);
                    square.setAttribute('fill', isLight ? '#000' : '#111');
                    square.setAttribute('class', 'square');
                    square.addEventListener('click', () => handleSquareClick(row, col));
                    boardSquares.appendChild(square);
                    
                    gameState.board[row][col] = null;
                }
            }
        }

        // Setup pieces
        function setupPieces() {
            // Black pieces (Industry)
            setupRow(0, 'black', ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r']);
            setupRow(1, 'black', Array(8).fill('p'));
            
            // White pieces (Creative)
            setupRow(6, 'white', Array(8).fill('p'));
            setupRow(7, 'white', ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r']);
        }

        function setupRow(row, color, pieces) {
            for (let col = 0; col < 8; col++) {
                gameState.board[row][col] = color === 'white' ? pieces[col] : pieces[col].toUpperCase();
            }
        }

        // Draw custom SVG pieces
        function drawBoard() {
            const piecesGroup = document.getElementById('pieces');
            piecesGroup.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const piece = gameState.board[row][col];
                    if (piece) {
                        drawCustomPiece(piece, row, col);
                    }
                }
            }
        }

        function drawCustomPiece(piece, row, col) {
            const isWhite = piece === piece.toLowerCase();
            const type = piece.toLowerCase();
            const x = col * 70 + 35;
            const y = row * 70 + 35;
            
            const group = document.createElement('g');
            group.setAttribute('class', `piece ${isWhite ? 'white' : 'black'}`);
            
            // Base circle
            const base = document.createElement('circle');
            base.setAttribute('cx', x);
            base.setAttribute('cy', y);
            base.setAttribute('r', 28);
            base.setAttribute('fill', isWhite ? '#fff' : '#000');
            base.setAttribute('stroke', isWhite ? '#000' : '#fff');
            base.setAttribute('stroke-width', 2);
            
            // Custom piece designs
            const symbol = createPieceSymbol(type, x, y, isWhite);
            
            group.appendChild(base);
            group.appendChild(symbol);
            document.getElementById('pieces').appendChild(group);
        }

        function createPieceSymbol(type, x, y, isWhite) {
            const group = document.createElement('g');
            const strokeColor = isWhite ? '#000' : '#fff';
            
            switch(type) {
                case 'p': // Artist with microphone
                    const mic = document.createElement('path');
                    mic.setAttribute('d', `M ${x-8} ${y-12} L ${x} ${y-8} L ${x+8} ${y-12} M ${x} ${y-8} L ${x} ${y+8}`);
                    mic.setAttribute('stroke', strokeColor);
                    mic.setAttribute('stroke-width', '2');
                    mic.setAttribute('fill', 'none');
                    group.appendChild(mic);
                    break;
                    
                case 'r': // Gatekeeper as gate
                    const gate = document.createElement('rect');
                    gate.setAttribute('x', x-10);
                    gate.setAttribute('y', y-15);
                    gate.setAttribute('width', 20);
                    gate.setAttribute('height', 30);
                    gate.setAttribute('stroke', strokeColor);
                    gate.setAttribute('stroke-width', '2');
                    gate.setAttribute('fill', 'none');
                    group.appendChild(gate);
                    break;
                    
                case 'n': // Lawyer with scales
                    const scales = document.createElement('g');
                    // Beam
                    const beam = document.createElement('line');
                    beam.setAttribute('x1', x-12);
                    beam.setAttribute('y1', y);
                    beam.setAttribute('x2', x+12);
                    beam.setAttribute('y2', y);
                    beam.setAttribute('stroke', strokeColor);
                    beam.setAttribute('stroke-width', '2');
                    scales.appendChild(beam);
                    // Base
                    const base = document.createElement('line');
                    base.setAttribute('x1', x);
                    base.setAttribute('y1', y);
                    base.setAttribute('x2', x);
                    base.setAttribute('y2', y+10);
                    base.setAttribute('stroke', strokeColor);
                    base.setAttribute('stroke-width', '2');
                    scales.appendChild(base);
                    // Pans
                    const pan1 = document.createElement('circle');
                    pan1.setAttribute('cx', x-8);
                    pan1.setAttribute('cy', y-3);
                    pan1.setAttribute('r', 4);
                    pan1.setAttribute('stroke', strokeColor);
                    pan1.setAttribute('stroke-width', '1');
                    pan1.setAttribute('fill', 'none');
                    scales.appendChild(pan1);
                    const pan2 = document.createElement('circle');
                    pan2.setAttribute('cx', x+8);
                    pan2.setAttribute('cy', y-3);
                    pan2.setAttribute('r', 4);
                    pan2.setAttribute('stroke', strokeColor);
                    pan2.setAttribute('stroke-width', '1');
                    pan2.setAttribute('fill', 'none');
                    scales.appendChild(pan2);
                    group.appendChild(scales);
                    break;
                    
                case 'b': // Award as trophy
                    const trophy = document.createElement('g');
                    const cup = document.createElement('path');
                    cup.setAttribute('d', `M ${x-6} ${y-8} Q ${x} ${y-12} ${x+6} ${y-8} L ${x+4} ${y+8} Q ${x} ${y+10} ${x-4} ${y+8} Z`);
                    cup.setAttribute('stroke', strokeColor);
                    cup.setAttribute('stroke-width', '2');
                    cup.setAttribute('fill', 'none');
                    trophy.appendChild(cup);
                    group.appendChild(trophy);
                    break;
                    
                case 'q': // Media scattering seeds
                    const media = document.createElement('g');
                    const circle = document.createElement('circle');
                    circle.setAttribute('cx', x);
                    circle.setAttribute('cy', y);
                    circle.setAttribute('r', 10);
                    circle.setAttribute('stroke', strokeColor);
                    circle.setAttribute('stroke-width', '2');
                    circle.setAttribute('fill', 'none');
                    media.appendChild(circle);
                    // Seeds
                    for (let i = 0; i < 4; i++) {
                        const angle = (i * Math.PI / 2);
                        const seed = document.createElement('circle');
                        seed.setAttribute('cx', x + Math.cos(angle) * 16);
                        seed.setAttribute('cy', y + Math.sin(angle) * 16);
                        seed.setAttribute('r', 2);
                        seed.setAttribute('fill', strokeColor);
                        media.appendChild(seed);
                    }
                    group.appendChild(media);
                    break;
                    
                case 'k': // Government with gavel
                    const gavel = document.createElement('g');
                    // Handle
                    const handle = document.createElement('line');
                    handle.setAttribute('x1', x-8);
                    handle.setAttribute('y1', y);
                    handle.setAttribute('x2', x+8);
                    handle.setAttribute('y2', y);
                    handle.setAttribute('stroke', strokeColor);
                    handle.setAttribute('stroke-width', '3');
                    gavel.appendChild(handle);
                    // Head
                    const head = document.createElement('rect');
                    head.setAttribute('x', x+4);
                    head.setAttribute('y', y-4);
                    head.setAttribute('width', 8);
                    head.setAttribute('height', 8);
                    head.setAttribute('stroke', strokeColor);
                    head.setAttribute('stroke-width', '1');
                    head.setAttribute('fill', strokeColor);
                    gavel.appendChild(head);
                    group.appendChild(gavel);
                    break;
            }
            
            return group;
        }

        // Game logic
        function handleSquareClick(row, col) {
            if (gameState.aiThinking) return;
            
            const piece = gameState.board[row][col];
            
            if (gameState.selectedPiece) {
                const move = gameState.validMoves.find(m => m.toRow === row && m.toCol === col);
                if (move) {
                    makeMove(move);
                    return;
                }
            }
            
            if (piece && ((gameState.currentPlayer === 'white' && piece === piece.toLowerCase()) || 
                         (gameState.currentPlayer === 'black' && piece === piece.toUpperCase()))) {
                selectPiece(row, col);
            } else {
                clearSelection();
            }
        }

        function selectPiece(row, col) {
            clearSelection();
            gameState.selectedPiece = { row, col };
            gameState.validMoves = getValidMoves(row, col);
            showValidMoves();
        }

        function showValidMoves() {
            const validMovesGroup = document.getElementById('validMoves');
            validMovesGroup.innerHTML = '';
            
            gameState.validMoves.forEach(move => {
                const circle = document.createElement('circle');
                circle.setAttribute('cx', move.toCol * 70 + 35);
                circle.setAttribute('cy', move.toRow * 70 + 35);
                circle.setAttribute('r', 6);
                circle.setAttribute('fill', 'rgba(255, 255, 255, 0.3)');
                validMovesGroup.appendChild(circle);
            });
        }

        function clearSelection() {
            gameState.selectedPiece = null;
            gameState.validMoves = [];
            document.getElementById('validMoves').innerHTML = '';
        }

        function getValidMoves(row, col) {
            const piece = gameState.board[row][col];
            const moves = [];
            const isWhite = piece === piece.toLowerCase();
            
            const directions = {
                'p': isWhite ? [[-1, 0]] : [[1, 0]],
                'r': [[-1,0],[1,0],[0,-1],[0,1]],
                'n': [[-2,-1],[-2,1],[2,-1],[2,1],[-1,-2],[-1,2],[1,-2],[1,2]],
                'b': [[-1,-1],[-1,1],[1,-1],[1,1]],
                'q': [[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]],
                'k': [[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]]
            };
            
            const type = piece.toLowerCase();
            const pieceDirs = directions[type];
            
            pieceDirs.forEach(([dRow, dCol]) => {
                let newRow = row + dRow;
                let newCol = col + dCol;
                
                if (newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {
                    const target = gameState.board[newRow][newCol];
                    if (!target || (isWhite && target === target.toUpperCase()) || 
                        (!isWhite && target === target.toLowerCase())) {
                        moves.push({ fromRow: row, fromCol: col, toRow: newRow, toCol: newCol, piece: piece });
                    }
                }
            });
            
            return moves;
        }

        function makeMove(move) {
            const { fromRow, fromCol, toRow, toCol, piece } = move;
            
            gameState.board[toRow][toCol] = piece;
            gameState.board[fromRow][fromCol] = null;
            
            const moveNotation = `${String.fromCharCode(97 + fromCol)}${8 - fromRow}-${String.fromCharCode(97 + toCol)}${8 - toRow}`;
            gameState.moveHistory.push(moveNotation);
            
            updateMoveList();
            drawBoard();
            clearSelection();
            
            gameState.currentPlayer = gameState.currentPlayer === 'white' ? 'black' : 'white';
            addEducationalInsight(move);
            
            if (gameState.currentPlayer === 'black') {
                setTimeout(() => makeAIMove(), 1000);
            }
        }

        function makeAIMove() {
            if (gameState.aiThinking) return;
            
            gameState.aiThinking = true;
            updateEducationalContent("AI thinking...");
            
            setTimeout(() => {
                const personality = aiPersonalities[document.getElementById('aiPersonality').value];
                const move = calculateAIMove(personality);
                
                if (move) {
                    makeMove(move);
                    addAIInsight(move, personality);
                }
                
                gameState.aiThinking = false;
            }, 1500);
        }

        function calculateAIMove(personality) {
            const possibleMoves = [];
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const piece = gameState.board[row][col];
                    if (piece && piece === piece.toUpperCase()) {
                        const moves = getValidMoves(row, col);
                        moves.forEach(move => {
                            const score = evaluateMove(move, personality);
                            possibleMoves.push({ move, score });
                        });
                    }
                }
            }
            
            if (possibleMoves.length === 0) return null;
            
            possibleMoves.sort((a, b) => b.score - a.score);
            const topMoves = possibleMoves.slice(0, Math.max(3, Math.floor(possibleMoves.length * personality.risk)));
            return topMoves[Math.floor(Math.random() * topMoves.length)].move;
        }

        function evaluateMove(move, personality) {
            let score = 0;
            const targetPiece = gameState.board[move.toRow][move.toCol];
            
            if (targetPiece) {
                const values = { 'p': 1, 'r': 5, 'n': 3, 'b': 3, 'q': 9, 'k': 1000 };
                score += values[targetPiece.toLowerCase()] * personality.risk;
            }
            
            return score;
        }

        function updateMoveList() {
            const moveList = document.getElementById('moveList');
            moveList.innerHTML = '';
            
            gameState.moveHistory.forEach((move, index) => {
                const moveItem = document.createElement('div');
                moveItem.className = 'move-item';
                moveItem.textContent = `${index + 1}. ${move}`;
                moveList.appendChild(moveItem);
            });
        }

        function addEducationalInsight(move) {
            const insights = {
                'p': "Artist advancing.",
                'r': "Gatekeeper controlling access.",
                'n': "Legal maneuver.",
                'b': "Award influence shifting.",
                'q': "Media amplifying reach.",
                'k': "Government regulating."
            };
            
            updateEducationalContent(insights[move.piece.toLowerCase()]);
        }

        function addAIInsight(move, personality) {
            const thinkingElement = document.getElementById('aiThinking');
            thinkingElement.innerHTML = `<p>${personality.name}: ${personality.style}</p>`;
        }

        function updateEducationalContent(message) {
            const content = document.getElementById('educationalContent');
            const insight = document.createElement('div');
            insight.className = 'insight';
            insight.innerHTML = `<p>${message}</p>`;
            
            const insights = content.querySelectorAll('.insight');
            if (insights.length > 4) insights[0].remove();
            
            content.appendChild(insight);
        }

        function resetGame() {
            gameState.board = [];
            gameState.currentPlayer = 'white';
            gameState.selectedPiece = null;
            gameState.validMoves = [];
            gameState.moveHistory = [];
            gameState.aiThinking = false;
            
            initGame();
            updateEducationalContent("New game started.");
        }

        function undoMove() {
            if (gameState.moveHistory.length > 0) resetGame();
        }

        window.addEventListener('load', initGame);
    </script>
</body>
</html>
